{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '54229410-94c77c5f0b522302148c51193';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const getImagesByQuery = async (currentQuery, page = 1)  =>  {\n  const response = await axios.get(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: currentQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page,\n            \n        },\n    });\n    return response.data;\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst lightbox = new SimpleLightbox('.gallery a');\nconst loadBtn = document.querySelector('.load-btn');\n\nexport const createGallery = images => {\n    const imgMrkp = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<li class=\"gallery-item\"><a href=\"${largeImageURL}\">\n        <div class=\"card\">\n                <img class=\"card-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"370\" height=\"334\"/>\n            <div class=\"card-body\">\n            <span class=\"card-body-title\">\n                <p class=\"card-subtitle\">likes: ${likes}</p>\n                <p class=\"card-subtitle\">views: ${views}</p>\n                <p class=\"card-subtitle\">comments: ${comments}</p>\n                <p class=\"card-subtitle\">downloads: ${downloads}</p>\n            </span>\n            </div>\n        </div>\n        </a>\n        </li>`\n    )\n        .join('');\n\n    gallery.insertAdjacentHTML('beforeend', imgMrkp);\n    lightbox.refresh();\n};\n\nexport const clearGallery = () => {\n  gallery.innerHTML = '';\n};\n\nexport const hideLoader = () => {\nloader.classList.add('hidden');\n};\n\nexport const showLoader = () => {\nloader.classList.remove('hidden');\n};\n\nexport const showLoadMoreButton = () => {\nloadBtn.classList.remove('hidden')\n};\n\nexport const hideLoadMoreButton = () => {\nloadBtn.classList.add('hidden');\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('#input');\nconst loadBtn = document.querySelector('.load-btn');\n\nlet page = 1;\nlet currentQuery = '';\nconst perPage = 15;\n\n\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const query = input.value.trim();\n  if (!query) {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: 'Sorry, there are no images matching your search query. Please try again!ðŸ’”',\n    });\n    return;\n  }\n\n  currentQuery = query;\n  page = 1;\n        \n  hideLoadMoreButton();\n  showLoader();\n  clearGallery();\n  \n\n  try {\n    const result = await getImagesByQuery(currentQuery, page, perPage);\n    const img = result.hits;\n    if (img.length === 0) {\n      setTimeout(() => {\n        iziToast.error({\n          position: 'topRight',\n          title: 'Error',\n          message: 'Sorry, there are no images matching your search query. Please try again!ðŸ’”',\n        });\n      }, 1000);\n      input.value = '';\n      hideLoadMoreButton();\n    } else {\n      setTimeout(() => {\n        createGallery(img);\n        input.value = '';\n        availableImages(img, perPage);\n\n        if (img.length === perPage) {\n          showLoadMoreButton();\n        } else {\n          hideLoadMoreButton();\n        }\n      }, 1000);\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: 'SorryðŸ’”',\n    });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n})\n\n  function availableImages(imeges, perPage) {\n    if (imeges.length < perPage) {\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.ðŸ’”\",\n      });\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n  }\n\nloadBtn.addEventListener('click', async () => { \n  hideLoadMoreButton();\n  showLoader();\n  page += 1;\n\n  try {\n    const result = getImagesByQuery(currentQuery, page, perPage);\n    const img = result.hits;\n    createGallery(img);\n    scrollLoad();\n    availableImages(img, perPage);\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: 'SorryðŸ’”',\n    });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n})\n  \n  function scrollLoad() {\n    const galleryItem = document.querySelector('.gallery li');\n    if (galleryItem) {\n      const { height } = galleryItem.getBoundingClientRect();\n        \n      requestAnimationFrame(() => {\n        window.scrollBy({ top: height * 2, behavior: 'smooth' });\n      });\n    }\n  }\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","currentQuery","page","axios","gallery","loader","lightbox","SimpleLightbox","loadBtn","createGallery","images","imgMrkp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","hideLoader","showLoader","showLoadMoreButton","hideLoadMoreButton","form","input","perPage","e","query","iziToast","img","availableImages","error","imeges","scrollLoad","galleryItem","height"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAmB,MAAOC,EAAcC,EAAO,KACzC,MAAMC,EAAM,IAAIJ,EAAU,CACrC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CAEH,CACT,CAAK,GACe,KCfdE,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,IAAIC,EAAe,YAAY,EAC1CC,EAAU,SAAS,cAAc,WAAW,EAErCC,EAAgBC,GAAU,CACnC,MAAMC,EAAUD,EAAO,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAChG,qCAAqCL,CAAa;AAAA;AAAA,+CAEXD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,kDAGvBC,CAAK;AAAA,kDACLC,CAAK;AAAA,qDACFC,CAAQ;AAAA,sDACPC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,cAM1D,EACI,KAAK,EAAE,EAEZd,EAAQ,mBAAmB,YAAaO,CAAO,EAC/CL,EAAS,QAAO,CACpB,EAEaa,EAAe,IAAM,CAChCf,EAAQ,UAAY,EACtB,EAEagB,EAAa,IAAM,CAChCf,EAAO,UAAU,IAAI,QAAQ,CAC7B,EAEagB,EAAa,IAAM,CAChChB,EAAO,UAAU,OAAO,QAAQ,CAChC,EAEaiB,EAAqB,IAAM,CACxCd,EAAQ,UAAU,OAAO,QAAQ,CACjC,EAEae,EAAqB,IAAM,CACxCf,EAAQ,UAAU,IAAI,QAAQ,CAC9B,ECzCMgB,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,QAAQ,EACvCjB,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIN,EAAO,EACPD,EAAe,GACnB,MAAMyB,EAAU,GAIhBF,EAAK,iBAAiB,SAAU,MAAMG,GAAK,CACzCA,EAAE,eAAc,EAEhB,MAAMC,EAAQH,EAAM,MAAM,KAAI,EAC9B,GAAI,CAACG,EAAO,CACVC,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QAAS,4EACf,CAAK,EACD,MACD,CAED5B,EAAe2B,EACf1B,EAAO,EAEPqB,IACAF,IACAF,IAGA,GAAI,CAEF,MAAMW,GADS,MAAM9B,EAAiBC,EAAcC,EAAMwB,CAAO,GAC9C,KACfI,EAAI,SAAW,GACjB,WAAW,IAAM,CACfD,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QAAS,4EACnB,CAAS,CACF,EAAE,GAAI,EACPJ,EAAM,MAAQ,GACdF,KAEA,WAAW,IAAM,CACfd,EAAcqB,CAAG,EACjBL,EAAM,MAAQ,GACdM,EAAgBD,EAAKJ,CAAO,EAExBI,EAAI,SAAWJ,EACjBJ,IAEAC,GAEH,EAAE,GAAI,CAEV,OAAQS,EAAO,CACdH,EAAS,MAAM,CACb,SAAU,WACV,QAAS,SACf,CAAK,EACD,QAAQ,MAAMG,CAAK,CACvB,QAAY,CACRZ,GACD,CACH,CAAC,EAEC,SAASW,EAAgBE,EAAQP,EAAS,CACpCO,EAAO,OAASP,GAClBG,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,8DACjB,CAAO,EACDN,KAEAD,GAEH,CAEHd,EAAQ,iBAAiB,QAAS,SAAY,CAC5Ce,IACAF,IACAnB,GAAQ,EAER,GAAI,CAEF,MAAM4B,EADS9B,EAAiBC,EAAcC,EAAMwB,CAAO,EACxC,KACnBjB,EAAcqB,CAAG,EACjBI,IACAH,EAAgBD,EAAKJ,CAAO,CAC7B,OAAQM,EAAO,CACdH,EAAS,MAAM,CACb,SAAU,WACV,QAAS,SACf,CAAK,EACD,QAAQ,MAAMG,CAAK,CACvB,QAAY,CACRZ,GACD,CACH,CAAC,EAEC,SAASc,GAAa,CACpB,MAAMC,EAAc,SAAS,cAAc,aAAa,EACxD,GAAIA,EAAa,CACf,KAAM,CAAE,OAAAC,CAAM,EAAKD,EAAY,sBAAqB,EAEpD,sBAAsB,IAAM,CAC1B,OAAO,SAAS,CAAE,IAAKC,EAAS,EAAG,SAAU,QAAQ,CAAE,CAC/D,CAAO,CACF,CACL"}